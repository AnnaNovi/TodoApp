(()=>{"use strict";class e{constructor(e,t=!1,o=""){this.content=e,this.done=t,this.note=o}}function t(){const t=this.parentElement.dataset.id,o=this.previousSibling,n=JSON.parse(localStorage.getItem(t));let c=+document.querySelector("#quantityOfTodo").innerText;this.classList.toggle("todoItem__checkBtn-active"),o.classList.toggle("todoItem__content-active");let l=!1===n.done;document.querySelector("#quantityOfTodo").innerText=!0===l?c-1:c+1;const s=new e(n.content,l,n.note),r=JSON.stringify(s);localStorage.setItem(t,r)}function o(){const e=this.parentElement.dataset.id,n=this.parentElement.querySelector(".todoItem__checkBtn"),c=this.parentElement.querySelector(".todoItem__closeBtn");n.removeEventListener("click",t),c.removeEventListener("click",o),this.parentElement.remove(),localStorage.removeItem(e)}function n(){this.querySelector(".todoItem__closeBtn").classList.add("hide")}function c(){this.querySelector(".todoItem__closeBtn").classList.remove("hide"),this.addEventListener("mouseout",n)}function l(e,n,l){!function(e,n,l=!1){const s=document.createElement("div"),r=document.createElement("span"),i=document.createElement("span"),a=document.createElement("button"),d=document.querySelector(".todoList");s.classList="todoItem",s.setAttribute("data-id",e),l&&"lightTheme"===localStorage.getItem("theme")&&s.classList.add("lightTheme"),r.classList="todoItem__content",r.innerText=n.content,i.classList="todoItem__checkBtn",!0===n.done&&(i.classList.add("todoItem__checkBtn-active"),r.classList.add("todoItem__content-active")),a.classList="todoItem__closeBtn hide",s.append(r),s.append(i),s.append(a),d.prepend(s),i.addEventListener("click",t),a.addEventListener("click",o),s.addEventListener("mouseover",c)}(e,JSON.parse(n),l)}function s(){const e=document.querySelectorAll(".filterBar__filter"),t=document.querySelectorAll(".todoItem");for(const t of e)t.classList.remove("filterBar__filter-active");switch(this.classList.add("filterBar__filter-active"),this.innerText){case"All":for(const e of t)e.classList.remove("hide");break;case"Active":for(const e of t)e.classList.remove("hide"),e.querySelector(".todoItem__checkBtn").classList.contains("todoItem__checkBtn-active")&&e.classList.add("hide");break;case"Completed":for(const e of t)e.classList.remove("hide"),e.querySelector(".todoItem__checkBtn").classList.contains("todoItem__checkBtn-active")||e.classList.add("hide")}}function r(e=!0){if(e){const e="darkTheme"===localStorage.getItem("theme")?"lightTheme":"darkTheme";localStorage.setItem("theme",e)}this.classList.toggle("moon"),document.querySelector("body").classList.toggle("lightTheme"),document.querySelector("#setTodo").classList.toggle("lightTheme"),document.querySelector(".checkBtnCreate").classList.toggle("lightTheme"),document.querySelector(".filterBar").classList.toggle("lightTheme");for(const e of document.querySelectorAll(".todoItem"))e.classList.toggle("lightTheme")}function i(e){const t=JSON.parse(e);let o=+document.querySelector("#quantityOfTodo").innerText;!1===t.done&&(document.querySelector("#quantityOfTodo").innerText=o+1)}const a=document.querySelector("#setTodo"),d=document.querySelector("#filterBar__clearCompleted"),m=document.querySelectorAll(".filterBar__filter"),u=document.querySelector("#darkLight");a.addEventListener("input",(function(){this.value=this.value[0].toUpperCase()+this.value.slice(1)})),a.addEventListener("keydown",(function(t){if("Enter"===t.key&&""!==setTodo.value){let t=+document.querySelector("#quantityOfTodo").innerText;!function(t){const o=new e(t),n=JSON.stringify(o);if(1===localStorage.length)localStorage.setItem(0,n),l(0,n,!0);else if(localStorage.length>0){let e=[];for(let t=0;t<localStorage.length;t++){let o=localStorage.key(t);(+o||0==+o)&&e.push(+o)}let t=Math.max(...e);localStorage.setItem(t+1,n),l(t+1,n,!0)}}(setTodo.value),setTodo.value="",document.querySelector("#quantityOfTodo").innerText=t+1}})),d.addEventListener("click",(function(){let e=document.querySelectorAll(".todoItem__checkBtn-active");for(const t of e)o.bind(t)()}));for(const e of m)e.addEventListener("click",s);u.addEventListener("click",r),document.addEventListener("DOMContentLoaded",(function(){let e=[];for(let t=0;t<localStorage.length;t++){let o=localStorage.key(t);(+o||0==+o)&&e.push(+o)}e.sort((function(e,t){return e-t}));for(const t of e){let e=localStorage.getItem(t);l(t,e,!1),i(e)}})),document.addEventListener("DOMContentLoaded",(function(){localStorage.getItem("theme")?"lightTheme"===localStorage.getItem("theme")&&r.bind(document.querySelector("#darkLight"))(!1):localStorage.setItem("theme","darkTheme")}))})();